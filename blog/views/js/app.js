(function(e){function u(e,t){var n=(e*(60/(t||1))).toFixed(2);return n>0?n:0}function a(e){i.chars=e.characters;i.lines=e.paragraphs;i.speed=u(i.chars,i.timer)}function f(){t.value=t.value.replace(/\t/g,"a€€a€€")}function l(){function h(e){if(a.indexOf(e)!==-1){return true}return false}function p(e,t,n){if(e[n]===t[n+1]&&e[n+1]===t[n+2]){return true}return false}function d(e,t){e.splice(t,0,"i??")}var e=t.value.split("\n"),n=[],s,o,a=["a?…","a??","a??","a??","a??","a??","a??","a??","a??","a??","a??","a??","a?‘","a?’","a?“","a?”","a?‧","a?–","a?—","a??","a??","a﹐€","a?‥","a?c","a??","a??","a??","a??","a??","a??","a? ","a?!","a?￠","a?￡","a??","a?￥","a?|","i?!","i?￠","i?￡","i??","i?￥","i?|","i?§","i?‥","i?c","i?a","i??","i??","i?-","i?R","i?¯","i?°","i?±","i?2","i?3","i?’","i?μ","i??","i?·","i?﹐","i?1","i?o","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l,c;i.wrong=0;f();for(l=0;l<i.lines;l++){n[l]=e[l].split("")}s=essayLines.length>i.lines?i.lines:essayLines.length;for(l=0;l<s;l++){o=typeof e[l+1]==="undefined"?n[l].length:r[l].length;for(c=0;c<o;c++){if(n[l][c]!==r[l][c]){if(h(n[l][c])){continue}if(p(n[l],r[l],c)){d(n[l],c)}i.wrong++}}}i.correct=i.chars-i.wrong;i.wrongRate=i.chars===0?0:(i.wrong/i.chars*100).toFixed(2);i.wrongRate=i.wrongRate>100?100:i.wrongRate;i.result=u(i.correct,i.timer)}function c(){localStorage.removeItem("typingResult")}function h(){if(typeof localStorage.typingResult!=="undefined"){var e=JSON.parse(localStorage.typingResult);e.push(i);localStorage.typingResult=JSON.stringify(e)}else{localStorage.typingResult="["+JSON.stringify(i)+"]"}}function p(){(function(){var n=o.time-i.timer,r,s;s=Math.floor(n/60);s=s<10?"0"+s:s;n-=s*60;r=n<10?"0"+n:n;e(".t-m")[0].innerHTML=s;e(".t-s")[0].innerHTML=r})();if(i.timer<o.time){setTimeout(function(){i.timer++;p()},1e3)}else{d()}}function d(){t.setAttribute("disabled",true);Countable.die(t);Countable.once(t,function(e){a(e)});l();c();h();alert("a??e–“a?°i??a﹐?ec—cμ?a??a€?");location.href=s}function v(){function u(e){if(e===s.tab){t.value="a€€a€€"}else{t.value=""}}function l(e){if(e===s.shift||e===s.ctrl||e===s.alt){return true}else{return false}}var s={tab:9,enter:13,shift:16,ctrl:17,alt:18};(function(){if(!hasFont("a?Re??a-￡e?‘e?”")||sessionStorage.font==="1"){n.className+=" altFont";t.className+=" altFont"}})();(function(){t.onpaste=function(){return false}})();(function(){var i=new Ajax;if(typeof o.essay==="undefined"||typeof o.time==="undefined"){e(".loading-content")[0].innerHTML="e‥-aR?aa”e?¯ea?i??a°?e?aa?‧e?”a??e‥-aR?e ?e?￠a€?<br>e?￥a﹐?a–·a?oc??a-?e?¯ea?i??e??e?3Facebookc‧?e‥€a€?";setTimeout(function(){location.href="./?action=setting"},3600)}i.create().get("essay/"+o.essay+".txt",function(){n.value=i.core.responseText;var t,s;essayLines=n.value.split("\n");s=essayLines.length;for(t=0;t<s;t++){r[t]=essayLines[t].split("")}setTimeout(function(){e("#loadingwrapper")[0].removeChild(e("#loading")[0])},316)})})();TABOVERRIDE.set(t);t.onkeydown=function(e){if(l(e.keyCode))return false;t.onkeydown=function(e){if(e.keyCode===s.enter){if(i.lines>16){n.scrollTop+=25}}if(e.keyCode===s.tab){f()}};u(e.keyCode);Countable.live(t,function(e){a(e)});p()}}var t=e("#typingArea")[0],n=e("#essayArea")[0],r=[],i={timer:0},s="./?action=result",o;o={time:sessionStorage.time,essay:sessionStorage.essay};v()})(Sizzle);